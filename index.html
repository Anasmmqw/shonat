<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ù…Ù„Ø© ØªØ¨Ø±Ø¹Ø§Øª Ù„Ø´Ù†Ø· Ø±Ù…Ø¶Ø§Ù†</title>
    <script type="module">
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

        // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ø¨Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØµØ­ÙŠØ­Ø©)
        const firebaseConfig = {
            apiKey: "YOUR_NEW_API_KEY",
            authDomain: "YOUR_NEW_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_NEW_PROJECT_ID-default-rtdb.firebaseio.com",
            projectId: "YOUR_NEW_PROJECT_ID",
            storageBucket: "YOUR_NEW_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_NEW_SENDER_ID",
            appId: "YOUR_NEW_APP_ID"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        function copyText(elementId) {
            let text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text);
            alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®: ' + text);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ù„Øº ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function updateAmountInDatabase(amount) {
            set(ref(database, "donation/amount"), amount);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function updateBackgroundInDatabase(bgUrl) {
            set(ref(database, "donation/background"), bgUrl);
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function fetchAmountFromDatabase() {
            const amountRef = ref(database, "donation/amount");
            onValue(amountRef, (snapshot) => {
                const amount = snapshot.val() || 0;
                document.getElementById("amount").innerText = amount;
                let percentage = (amount / 10000) * 100;
                document.getElementById("progress-bar").style.width = percentage + "%";
                document.getElementById("progress-bar").innerText = Math.round(percentage) + "%";
            });
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø®Ù„ÙÙŠØ© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function fetchBackgroundFromDatabase() {
            const bgRef = ref(database, "donation/background");
            onValue(bgRef, (snapshot) => {
                const bgUrl = snapshot.val();
                if (bgUrl) {
                    document.body.style.backgroundImage = `url('${bgUrl}')`;
                }
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        fetchAmountFromDatabase();
        fetchBackgroundFromDatabase();

        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("updateAmountBtn").addEventListener("click", function() {
                const newAmount = document.getElementById("manualAmount").value;
                updateAmountInDatabase(newAmount);
            });

            document.getElementById("updateBgBtn").addEventListener("click", function() {
                const newBgUrl = document.getElementById("bgUrl").value;
                updateBackgroundInDatabase(newBgUrl);
            });
        });
    </script>
    <style>
        body { text-align: center; direction: rtl; background-size: cover; background-position: center; color: white; }
        .container { max-width: 500px; margin: auto; padding: 20px; background: rgba(0, 0, 0, 0.7); border-radius: 10px; }
        .progress-bar { width: 100%; background: #ddd; border-radius: 20px; overflow: hidden; }
        .progress { height: 30px; background: green; width: 0%; color: white; line-height: 30px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="title">Ø­Ù…Ù„Ø© ØªØ¨Ø±Ø¹Ø§Øª Ù„Ø´Ù†Ø· Ø±Ù…Ø¶Ø§Ù†</h1>
        <p>Ø±Ù‚Ù… Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´: <strong id="vodafone">01158159732</strong> 
            <button class="copy-btn" onclick="copyText('vodafone')">ğŸ“‹ Ù†Ø³Ø®</button></p>
        <p>Ø±Ù‚Ù… Ø¥Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ: <strong id="instapay">01122372630</strong> 
            <button class="copy-btn" onclick="copyText('instapay')">ğŸ“‹ Ù†Ø³Ø®</button></p>
        <p>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙØ¬Ù…Ø¹: <span id="amount">0</span> Ø¬Ù†ÙŠÙ‡</p>
        <div class="progress-bar">
            <div class="progress" id="progress-bar">0%</div>
        </div>
        <div id="adminPanel" class="hidden">
            <input type="number" id="manualAmount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¬Ø¯ÙŠØ¯">
            <button id="updateAmountBtn">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
        <div id="bgPanel" class="hidden">
            <input type="text" id="bgUrl" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
            <button id="updateBgBtn">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
        </div>
    </div>
    <script>
        let clickCount = 0;
        document.body.addEventListener("click", function() {
            clickCount++;
            if (clickCount === 10) {
                document.getElementById('adminPanel').classList.remove('hidden');
                clickCount = 0;
            }
        });
    </script>
</body>
</html>
